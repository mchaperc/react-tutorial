<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>React Tutorial</title>
    <!-- Not present in the tutorial. Just for basic styling. -->
    <link rel="stylesheet" href="css/base.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/0.14.0/react.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/0.14.0/react-dom.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-core/5.6.15/browser.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/marked/0.3.2/marked.min.js"></script>
  </head>
  <body>
    <div id="content"></div>
    <script type="text/babel">
    
/***************************************
Facebook React Tutorial in ES6
***************************************/

      // let data = [
      //   {
      //     id: 1,
      //     author: "Pete Hunt",
      //     text: "This is one comment"
      //   },
      //   {
      //     id: 2,
      //     author: "Jordan Walke",
      //     text: "This is *another* comment"
      //   }
      // ]
      // class CommentBox extends React.Component {
      //   constructor(props) {
      //     super(props);
      //     this.state = {
      //       data: []
      //     };
      //     this.loadCommentsFromServer.bind(this)
      //   }
      //   loadCommentsFromServer() {
      //     $.ajax({
      //       url: this.props.url,
      //       dataType: 'json',
      //       cache: false,
      //       success: function(data) {
      //         this.setState({data: data});
      //       }.bind(this),
      //       error: function(xhr, status, err) {
      //         console.error(this.props.url, status, err.toString());
      //       }.bind(this)
      //     });
      //   }
      //   handleCommentSubmit(comment) {
      //     $.ajax({
      //       url: this.props.url,
      //       dataType: 'json',
      //       type: 'POST',
      //       data: comment,
      //       success: function(data) {
      //         this.setState({data: data});
      //       }.bind(this),
      //       error: function(xhr, status, err) {
      //         console.error(this.props.url, status, err.toString());
      //       }.bind(this)
      //     });
      //   }
      //   componentDidMount() {
      //     this.loadCommentsFromServer();
      //     setInterval(this.loadCommentsFromServer.bind(this), this.props.pollInterval);
      //   }
      //   render() {
      //     return (
      //       <div className="commentBox">
      //         <h1>Comments</h1>
      //         <CommentList data={this.state.data} />
      //         <CommentForm onCommentSubmit={this.handleCommentSubmit.bind(this)}/>
      //       </div>
      //     );
      //   }
      // }
      // class CommentList extends React.Component {
      //   createList() {
      //     return this.props.data.map(function(comment) {
      //       return (
      //         <Comment key={comment.id} author={comment.author}>{comment.text}</Comment>
      //       );
      //     })
      //   }
      //   render() {
      //     return (
      //       <div className="commentList">
      //         {this.createList()}
      //       </div>
      //     );
      //   }
      // }
      // class CommentForm extends React.Component {
      //   constructor(props) {
      //     super(props);
      //     this.state = {
      //       author: '',
      //       text: ''
      //     }
      //   }
      //   handleAuthorChange(e) {
      //     this.setState({
      //       author: e.target.value
      //     });
      //   }
      //   handleTextChange(e) {
      //     this.setState({
      //       text: e.target.value
      //     });
      //   }
      //   handleSubmit(e) {
      //     e.preventDefault();
      //     let author = this.state.author.trim();
      //     let text = this.state.text.trim();
      //     if (!text || !author) {
      //       return;
      //     }
      //     this.props.onCommentSubmit({author: author, text: text});
      //     this.setState({author: '', text: ''});
      //   }
      //   render() {
      //     return (
      //       <form className="commentForm" onSubmit={this.handleSubmit.bind(this)}>
      //         <input onChange={this.handleAuthorChange.bind(this)} type="text" placeholder="Your name" />
      //         <input onChange={this.handleTextChange.bind(this)} type="text" placeholder="Say something..." />
      //         <input type="submit" value="Post" /> 
      //       </form>
      //     )
      //   }
      // }
      // class Comment extends React.Component {
      //   constructor(props) {
      //     super(props);
      //     this.rawMarkup.bind(this);
      //   }
      //   rawMarkup() {
      //     let rawMarkup = marked(this.props.children.toString(), {sanitize: true});
      //     return { __html: rawMarkup };
      //   }
      //   render() {
      //     return (
      //       <div className="comment">
      //         <h2 className="commentAuthor">
      //           {this.props.author}
      //         </h2>
      //         <span dangerouslySetInnerHTML={this.rawMarkup()} />
      //       </div>
      //     );
      //   }
      // }
      // ReactDOM.render(
      //   <CommentBox url="/api/comments" pollInterval={2000} />,
      //   document.getElementById('content')
      // )

/***************************************
Incremental buttons
***************************************/

// class MyComponent extends React.Component {
//   constructor() {
//     super();
//     this.state = {
//       value: ''
//     };
//   }
//   handleStateChange(e) {
//     this.setState({
//       value: e.target.value
//     })
//   }
//   render() {
//     let returnedValue;
//     if (!this.state.value) {
//       returnedValue = 'Please provide input:';
//     } else {
//       returnedValue = this.state.value;
//     }
//     return (
//       <div>
//         <h2>{returnedValue}</h2>
//         <input type="text" onChange={this.handleStateChange.bind(this)} value={this.state.value} />
//       </div>
//     )
//   }
// }

// class MyComponentContainer extends React.Component {
//   constructor(props) {
//     super(props);
//     this.state = {
//       num: 0
//     }
//     this.generateButton.bind(this);
//   }
//   handleStateChange(e) {
//     this.setState({
//       num: this.state.num + Number(e.target.value)
//     });
//   }
//   generateButton() {
//     return (
//       this.props.values.map(num => {
//         return <MyButton key={Math.random()} value={num} onClick={this.handleStateChange.bind(this)} />
//       })
//     )
//   }
//   render() {
//     return (
//       <div>
//         <div>
//           <MyNumber total={this.state.num} />
//         </div>
//         <div>
//           {this.generateButton()}
//         </div>
//       </div>
//     )
//   }
// }

// class MyButton extends React.Component {
//   constructor(props) {
//     super(props);
//   }
//   render() {
//     return (
//       <button value={this.props.value} onClick={this.props.onClick}>{this.props.value}</button>
//     )
//   }
// }

// class MyNumber extends React.Component {
//   constructor(props) {
//     super(props);
//   }
//   render() {
//     return(
//       <h2>{this.props.total}</h2>
//     )
//   }
// }

// ReactDOM.render(
//   <MyComponentContainer values={[1,2,3,4,5]} />,
//   document.getElementById('content')
// );

/***************************************
Bubble Sort Implementation
***************************************/

    class BubbleSortContainer extends React.Component {
      constructor(props) {
        super(props);
        this.state = {
          userNum: 0,
          arr: [],
          numSwaps: 0,
          numCompares: 0
        }
        this.randomInt.bind(this);
      }
      randomInt(num) {
        var randomNums = [];
        for (var i = 0; i < num; i++) {
          randomNums.push(parseInt(Math.random() * 1000));
        }
        return randomNums;
      }
      handleChange(e) {
        this.setState({
          userNum: e.target.value
        });
      }
      handleSubmit(e) {
        e.preventDefault();
        let self = this;
        if (self.state.userNum) {
          self.setState({
            arr: self.randomInt(this.state.userNum)
          });
        }
      }
      handleSort() {
        let arr = this.state.arr;
        let numCompares = this.state.numCompares;
        let numSwaps = this.state.numSwaps;
        let isSorted = false;
        while (!isSorted) {
          isSorted = true;
          for (var i = 0; i < arr.length; i++) {
            numCompares++;
            if (arr[i] > arr[i+1]) {
              let temp = arr[i];
              arr[i] = arr[i+1];
              arr[i+1] = temp;
              isSorted = false;
              numSwaps++;
            }
          }
        }
        this.setState({
          numSwaps,
          numCompares,
          arr
        });
      }
      handleClear() {
        this.setState({
          arr: [],
          userNum: 0,
          numSwaps: 0,
          numCompares: 0
        });
      }
      render() {
        let displayInfo;
        let sortStats;
        if (!this.state.arr.length) {
          displayInfo = 'Please provide an integer up to 1000 from which I will generate a random assortment of integers to then utilize bubble sort on.';
          sortStats = ''
        } else {
          displayInfo = '' + this.state.arr;
          sortStats = <SortStats compares={this.state.numCompares} swaps={this.state.numSwaps} />;
        }
        return (
          <div>
            <form onSubmit={this.handleSubmit.bind(this)}>
              <NumDisplay displayInfo={displayInfo} />
              {sortStats}
              <input type="number" onChange={this.handleChange.bind(this)} value={this.state.userNum} />
              <button>Submit</button>
            </form>
            <button disabled={!this.state.arr.length} onClick={this.handleSort.bind(this)}>Sort</button>
            <button disabled={!this.state.arr.length} onClick={this.handleClear.bind(this)}>Clear</button>
          </div>
        )
      }
    }

    class NumDisplay extends React.Component {
      constructor(props) {
        super(props);
      }
      render() {
        return (
          <h4>{this.props.displayInfo}</h4>
        )
      }
    }

    class SortStats extends React.Component {
      constructor(props) {
        super(props);
      }
      render() {
        return(
          <div>
            <p>Number of comparisons made: {this.props.compares}</p>
            <p>Number of swaps made: {this.props.swaps}</p>
          </div>
        )
      }
    }

    ReactDOM.render(
      <BubbleSortContainer />,
      document.getElementById('content')
    );

    </script>
  </body>
</html>
